#!/usr/bin/env bash
# Dev session template

SESSION="${1:-dev}"

if tmux has-session -t "$SESSION" 2>/dev/null; then
    exec tmux attach -t "$SESSION"
fi

COLS=$(tput cols)
ROWS=$(tput lines)

tmux new-session -d -s "$SESSION" -n "dev" -x "$COLS" -y "$ROWS"

# Window 1: dev - single pane (customize per project)

# Window 2: farm - 5 equal columns
tmux new-window -t "$SESSION" -n "farm"
for _ in {1..4}; do
    tmux split-window -h -t "$SESSION:2"
done
tmux select-layout -t "$SESSION:2" even-horizontal

# Window 3: dev2 - 4 columns, column 2 has vertical split
tmux new-window -t "$SESSION" -n "dev2"
tmux split-window -h -t "$SESSION:3"
tmux split-window -h -t "$SESSION:3"
tmux split-window -h -t "$SESSION:3"
tmux select-pane -L
tmux select-pane -L
tmux select-pane -L
tmux select-pane -R
tmux split-window -v -p 40
tmux select-layout -t "$SESSION:3" '8886,491x96,0,0{80x96,0,0,1,184x96,81,0[184x57,81,0,2,184x38,81,58,3],124x96,266,0,4,100x96,391,0,5}'

# Window 4: farm2 - 5 equal columns
tmux new-window -t "$SESSION" -n "farm2"
for _ in {1..4}; do
    tmux split-window -h -t "$SESSION:4"
done
tmux select-layout -t "$SESSION:4" even-horizontal

# Start on window 1
tmux select-window -t "$SESSION:1"

tmux attach -t "$SESSION"
